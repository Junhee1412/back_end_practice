<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout_5.2.3}">

<!--고유 CSS 추가-->
<th:block layout:fragment="css">
  <link rel="stylesheet" th:href="@{/css/admin/admin_user_list.css}" >
  <link rel="stylesheet" th:href="@{/css/fragments/header_card.css}" >
  <link rel="stylesheet" th:href="@{/css/fragments/page.css}" >
</th:block>

<!--고유 스크립트 추가-->
<th:block layout:fragment="script">
  <script defer th:src="@{/js/admin/admin_user_list.js}"></script>
</th:block>

<title>회원 목록 보기</title>

<div layout:fragment="content">

  <!-- section -->
  <div class="jua header-card">
    <div class="card bg-crop">
      <img src="../img/mypost/post.jpg" class="card-img rounded mx-auto d-block bg-menu" alt="커뮤니티설명" />
      <div class="card-img-overlay" id="community_type">
        <h5 class="card-title text-dark text-center fs-1">
          유저 목록
        </h5>
        <!--<p class="card-text text-dark text-center fs-3">~~님의 글입니다.</p>-->
      </div>
    </div>
  </div>

  <section class="sans">

    <form>
      <div class="mt-4" id="table_box">
        <table class="table pad_4">
          <thead>
          <tr class="text-center">
            <th scope="col">회원번호</th>
            <th scope="col">회원아이디</th>
            <th scope="col">회원이름</th>
            <th scope="col">닉네임</th>
            <th scope="col">등급</th>
            <th scope="col">상세조회</th>
            <th scope="col">삭제</th>
          </tr>
          </thead>
          <tbody>
          <tr th:each="userMaster: ${userList}">
            <td class="text-center" th:text="${userMaster.getUserNo()}"></td>
            <td th:text="${userMaster.getUserId()}"></td>
            <td class="text-center" th:text="${userMaster.getUserName()}"></td>
            <td th:text="${userMaster.getNickName()}"></td>
            <td th:text="${userMaster.getUserType()}"></td>
            <td class="text-center">
              <a class="btn btn-outline-dark small_btn" th:href="@{|/adminUserDetail?userNo=${userMaster.getUserNo()}|}">조회</a>
            </td>
            <td class="text-center">
              <a th:if="${userMaster.getUserType()=='MEMBER'}" th:href="@{/adminUserDelete?(userNo=${userMaster.getUserNo()})}" type="button" id="confirm_deleteUser_btn" class="btn btn-outline-danger confirm_deleteUser_btn small_btn">삭제</a><!--onclick="checkcheck(e)"-->
            </td>
          </tr>
          </tbody>
        </table>
        <hr class="border border-white">
      </div>
      <!--  검색하기  -->
      <div  style="margin: 0 auto; width: 25%; ">
        <form th:action="@{/boardlist}" method="get">
          <div class="p-1 bg-light rounded rounded-pill shadow-sm mb-4">
            <div class="input-group">
              <input type="search" name="searchKeyword" placeholder="유저아이디를 입력하세요" aria-describedby="button-addon1" class="form-control border-0 bg-light">
              <div class="input-group-append">
                <button id="button-addon1" type="submit" class="btn btn-link text-primary"><i class="fa fa-search"></i></button>
              </div>
            </div>
          </div>
        </form>
      </div>

      <hr class="border border-white">
      <!--230225 아래줄에 th:style="${totalPage<=0 ? 'visibility:hidden' : 'visibility'}" 추가-->
      <nav class="marbot_100" aria-label="Page navigation example" th:style="${totalPage<=0 ? 'visibility:hidden' : 'visibility'}">
        <ul class="pagination">
          <li class="page-item" th:classappend="${1 == nowPage} ? 'disabled'">
            <a class="page-link" href="#" aria-label="Previous" th:href="@{/adminUserList(page=${startPage-1})}"><span aria-hidden="true">&laquo;</span></a>
          </li>
          <li class="page-item" th:classappend="${1 == nowPage} ? 'disabled'">
            <a class="page-link" href="#" aria-label="Previous" th:href="@{/adminUserList(page=${nowPage-2})}"><span aria-hidden="true">&lt;</span></a>
          </li>
          <li class="page-item" th:classappend="${i == nowPage} ? 'disabled'" th:each="i : ${#numbers.sequence(startPage, endPage)}" th:if="${i >= nowPage-5 and i <= nowPage+4}">
            <a class="page-link" href="#"  th:href="@{/adminUserList(page=${i - 1},searchKeyword = ${param.searchKeyword})}" th:text="${i}">1</a>
          </li>
          <li class="page-item" th:classappend="${endPage == nowPage} ? 'disabled'">
            <a class="page-link" href="#" aria-label="Next"  th:href="@{/adminUserList(page=${nowPage})}"><span aria-hidden="true">&gt;</span></a>
          </li>
          <li class="page-item" th:classappend="${endPage == nowPage} ? 'disabled'">
            <a class="page-link" href="#" aria-label="Next"  th:href="@{/adminUserList(page=${endPage-1})}"><span aria-hidden="true">&raquo;</span></a>
          </li>
        </ul>
      </nav>
      <hr class="border border-white">

  </section>
  <!-- section - end -->


</div>
</html>
