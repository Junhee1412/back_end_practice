## 쓰레드

- 애플리케이션 코드를 하나하나 순차적으로 실행하는 것은 쓰레드이다.
- 자바 메인 메서드를 처음 실행하면 main이라는 이름의 쓰레드가 실행된다.
- 쓰레드가 없다면 자바 애플리케이션 실행이 불가능하다.
- 쓰레드는 한 번에 하나의 코드 라인만 수행한다.
- 동시 처리가 필요하면 쓰레드를 추가로 생성한다.
- 쓰레드는 공장 하나 라고 생각하면 편할 듯 하다.

---

## 쓰레드 사용법(요청마다 생성)

- 무언갈 요청할 때 쓰레드를 생성하고 쓰레드를 삭제하는 방식으로 애플리케이션을 설계할 수 있다.
- 각각의 쓰레드가 응답하고 사라지는 방식으로 설계한다.
- 위 방식으로 하더라도 정상 작동은 된다.

---

### 요청마다 생성 시 장단점

- 장점
  - 동시 요청을 할 수 있다.
  - 리소스(CPU, 메모리)가 허용할 때까지 처리가 가능하다.
  - 하나의 쓰레드가 지연되어도 나머지 쓰레드는 정상 작동한다.
- 단점
  - 쓰레드는 생성 비용이 매우매우 비싸다.
    - 고객의 요청이 올 때마다 쓰레드를 생성하면, 응답 속도가 늦어지는 결과가 초래된다.
  - 쓰레드는 컨텍스트 스위칭 비용이 발생한다.
    - 쓰레드끼리 전환할 때 비용이 발생하는 것을 컨텍스트 스위칭 비용이라고 한다.
    - 2개정도의 쓰레드가 아니라 수백개의 쓰레드가 컨텍스트 스위칭을 한다면.. 상당히 많은 비용이 발생된다.
  - 쓰레드 생성에 제한이 없다.
    - 고객 요청이 무한대로 발생할 경우에는 CPU, 메모리 임계점을 넘어서 서버가 반드시 다운된다.

---

### 해결방법은 쓰레드 풀이다!

- 미리 쓰레드를 쓰레드 풀에 만들어둔다.(500개라고 가정하자)
- 쓰레드는 사용되면 다시 쓰레드 풀에 반납한다.
- 계속해서 쓰레드를 재활용하는 방식이다.

---

**내일은 쓰레드에 대해 마저 정리하겠다!**
